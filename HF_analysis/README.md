# 心不全（HF）気象関連分析プロジェクト

## 📋 プロジェクト概要

心不全（Heart Failure, HF）の気象条件との関連性を分析し、気象情報のみを使用した予測モデルを構築します。

## 🎯 分析目標

### 1. 心不全の特徴理解
- 心不全の発生パターンと季節性
- 気象条件が心不全に与える影響
- 他の心血管疾患（AMI、VT/VF、PE、Af）との比較

### 2. 気象影響の仮説
- **気温の急激な変化**: 心臓への負荷増加
- **湿度の影響**: 呼吸器系への負担
- **気圧変動**: 循環器系への影響
- **季節性**: 冬場の心不全増加傾向

### 3. 分析計画
1. **データ探索**: 心不全データの基本統計
2. **特徴量エンジニアリング**: 気象データの高度な処理
3. **モデル構築**: 気象情報のみの予測モデル
4. **特化分析**: 心不全特有のパターン分析
5. **比較分析**: 他疾患との比較

### 4. 期待される成果
- 心不全の気象予測モデル（目標AUC > 0.85）
- 心不全特有の気象リスク因子の特定
- 他疾患との気象反応性の比較
- 実用的な医療予測ツールの開発

## 📁 ファイル構成

```
HF_analysis/
├── README.md                           # このファイル
├── weather_jroad_encoded_2012_2021.csv # 気象データ
├── 東京HF.csv                          # 心不全データ（ユーザー配置予定）
├── merge_hf_weather_data.py           # データ統合スクリプト
├── train_model_hf_weather_only.py     # HF専用予測モデル
├── hf_specific_analysis.py            # HF特化分析
├── hf_analysis_visualizations.png     # HF分析可視化
├── results/                           # 詳細評価結果
├── hf_model_save_summary.txt          # HFモデル保存サマリー
├── hf_model_performance_details.txt   # HF詳細性能指標
└── hf_analysis_report.md              # HF特化分析レポート
```

## 🔬 技術的特徴

### 気象情報のみの予測
- 入院人数データは完全除外
- データリーク防止のための時間系列分割
- 過去データのみを使用した特徴量エンジニアリング

### 高度なアンサンブル手法
- LightGBM、XGBoost、CatBoost
- Deep Neural Network、Attention Neural Network
- 動的重み最適化、信頼度重み付きアンサンブル
- 不確実性を考慮したアンサンブル

### 特徴量エンジニアリング
- 季節性特徴量（月、季節、祝日）
- 気象相互作用特徴量
- 時間系列特徴量（移動平均、標準偏差）
- 極端気象特徴量
- 複合気象条件特徴量

## 📊 評価指標

- **ROC-AUC**: 主要評価指標
- **PR-AUC**: 不均衡データへの対応
- **Precision, Recall, F1-Score**: 詳細性能
- **Specificity**: 偽陽性率の評価

## 🎉 期待される成果

心不全の気象予測モデルにより、以下の医療応用が期待されます：

1. **予防医療**: 気象条件に基づく心不全リスク予測
2. **医療資源配分**: 高リスク日の医療体制強化
3. **患者教育**: 気象条件に応じた生活指導
4. **研究応用**: 心不全の気象関連メカニズム解明

## 📈 他疾患との比較予定

| 疾患 | 目標AUC | 主要気象因子 | 季節性 |
|------|---------|-------------|--------|
| PE | 0.9381 | 気温、湿度 | 夏場増加 |
| AMI | 0.9013 | 気温、気圧 | 冬場増加 |
| Af | 0.8876 | 湿度、気圧 | 冬場増加 |
| VT/VF | 0.8704 | 湿度、風速 | 冬場増加 |
| **HF** | **>0.85** | **予測** | **予測** | 