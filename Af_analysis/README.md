# Af（心房細動）気象関連性分析プロジェクト

## プロジェクト概要

心房細動（Af）の気象条件との関連性を分析し、気象情報のみを使用した高精度な予測モデルを構築します。

## 分析対象

### 疾患特性
- **心房細動（Af）**: 最も一般的な不整脈の一つ
- **気象影響**: 気温、湿度、気圧、風速などの影響
- **季節性**: 冬場の発生率増加が報告されている
- **急性発作**: 気象変化による急性発作の増加

### 仮説
1. **気温の影響**: 低温時に発生率が増加
2. **湿度の影響**: 高湿度時に急性発作が増加
3. **気圧の影響**: 低気圧時に症状が悪化
4. **風速の影響**: 強風時に急性発作が増加

## 分析計画

### 1. データ探索
- Afデータの基本統計
- 気象データとの統合
- 欠損値の確認と処理

### 2. 特徴量エンジニアリング
- 日付関連特徴量（季節性、周期性）
- 気象相互作用特徴量
- 時系列特徴量（移動平均、変化率）
- 高度な気象時系列特徴量

### 3. モデル構築
- 気象情報のみを使用（入院データは除外）
- 75%タイルでカットオフ設定
- 時系列分割による検証
- アンサンブル学習（LightGBM、XGBoost、CatBoost）

### 4. 評価と比較
- ROC-AUC、PR-AUC、Precision、Recall、F1-Score
- 他の心血管疾患（AMI、VT/VF、PE）との比較
- 気象反応性の比較分析

## 期待される成果

### 1. 予測精度
- 気象情報のみでAUC 0.85以上を目標
- データリークの完全排除
- 安定した予測性能

### 2. 医療的意義
- 気象予報に基づくAfリスク予測
- 急性発作の予防的介入
- 患者指導への応用

### 3. 比較分析
- 他の心血管疾患との気象反応性比較
- 疾患特異的な気象影響の解明
- 統合リスク評価への応用

## ファイル構成

```
Af_analysis/
├── README.md                           # プロジェクト概要
├── train_model_af_weather_only.py     # Af気象情報のみのモデル
├── merge_af_weather_data.py           # データ統合スクリプト
├── af_weather_merged.csv              # 統合データ
├── 東京Af.csv                         # Afデータ（手動配置）
├── weather_jroad_encoded_2012_2021.csv # 気象データ
├── results/                           # 実行結果
├── saved_models/                      # 保存されたモデル
└── weather_only_results/              # 気象情報のみの結果
```

## 技術的アプローチ

### 1. データ前処理
- 欠損値の適切な処理
- 異常値の検出と処理
- データの正規化

### 2. 特徴量エンジニアリング
- 気象要素の相互作用
- 時系列特徴量の作成
- 季節性の考慮

### 3. モデル選択
- アンサンブル学習
- ハイパーパラメータ最適化
- 交差検証

### 4. 評価指標
- ROC-AUC、PR-AUC
- Precision、Recall、F1-Score
- 特徴量重要度

## 今後の展望

### 1. 実装可能性
- リアルタイム予測システム
- 医療機関連携
- 患者アプリケーション

### 2. 研究拡張
- 他の不整脈との比較
- 地域差の分析
- 長期的変化の追跡

### 3. 予防医療への応用
- 気象条件に基づく予防的介入
- 患者教育プログラム
- 公衆衛生政策への応用

---

**プロジェクト開始日**: 2025年7月29日  
**分析者**: AI Assistant  
**プロジェクト**: Af気象関連性分析 